{"version":3,"sources":["webpack:///./src/pages/charts/mysql-streaming/index.js"],"names":["xDesc","title","prop","values","yDesc","Environments","props","_this","_React$Component","call","this","items","label","value","default","render","onChange","react__WEBPACK_IMPORTED_MODULE_6___default","a","createElement","_components__WEBPACK_IMPORTED_MODULE_7__","React","Component","getTicks","inc","max","result","i","push","MysqlStreamingImpl","_this2","_React$Component2","state","extractor","environment","limitsBelow100Options","legend","position","focusTarget","hAxis","ticks","vAxis","format","viewWindow","min","limitsBelow1kOptions","JSON","parse","stringify","_this3","_this$state","jmhList","href","setState","id","chartType","dataTable","filter","d","limit","options","flatten","listOfLists","forEach","l","v","MysqlStreaming","JmhChartPage","fetchFunc","Promise","all","loadJson","then","flattenAndSetEnvironment","index","list","data","params","exportDimensionsFunc","benchmark","_benchmark$split","split","driverPart","method","other","slice","length","Error","substring","lastIndexOf","parseInt","headerText"],"mappings":"0QAIA,IAAMA,EAAQ,CACZC,MAAO,SACPC,KAAM,SACNC,OAAQ,CACN,oBACA,oBACA,iBACA,mBAIEC,EAAQ,CACZH,MAAO,QACPC,KAAM,QACNC,OAAQ,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,MAGjHE,cACJ,SAAAA,EAAYC,GAAO,IAAAC,EAAA,OACjBA,EAAAC,EAAAC,KAAAC,KAAMJ,IAANI,MAEKC,MAAQ,CACX,CACEC,MAAO,QACPC,MAAO,SAET,CACED,MAAO,sBACPC,MAAO,QAET,CACED,MAAO,sBACPC,MAAO,OACPC,SAAS,GAEX,CACEF,MAAO,UACPC,MAAO,YAnBMN,4BAwBnBQ,OAAA,WAAS,IACAC,EAAYN,KAAKJ,MAAjBU,SACP,OACEC,EAAAC,EAAAC,cAACC,EAAA,EAAD,CAAQR,MAAM,gBAAgBI,SAAUA,EAAUL,MAAOD,KAAKC,YA5BzCU,IAAMC,WAiCjC,SAASC,EAASC,EAAKC,GAErB,IADA,IAAMC,EAAS,GACNC,EAAI,EAAGA,GAAKF,EAAKE,GAAKH,EAC7BE,EAAOE,KAAKD,GAEd,OAAOD,MAGHG,cACJ,SAAAA,EAAYvB,GAAO,IAAAwB,EAAA,OACjBA,EAAAC,EAAAtB,KAAAC,KAAMJ,IAANI,MAEKsB,MAAQ,CACXC,UAAW,KACXC,YAAa,QAGfJ,EAAKK,sBAAwB,CAC3BC,OAAQ,CAENC,SAAU,UAGZC,YAAa,WACbC,MAAO,CACLtC,MAAO,YACPuC,MAAOjB,EAAS,GAAI,MAEtBkB,MAAO,CACLxC,MAAO,qBACPyC,OAAQ,QACRC,WAAY,CACVC,IAAK,KAIXd,EAAKe,qBAAuBC,KAAKC,MAAMD,KAAKE,UAAUlB,EAAKK,wBAC3DL,EAAKe,qBAAqBN,MAAMC,MAAQjB,EAAS,IAAK,KA5BrCO,4BA+BnBf,OAAA,WAAS,IAAAkC,EAAAvC,KAAAwC,EAC0BxC,KAAKsB,MAA/BC,EADAiB,EACAjB,UAAWC,EADXgB,EACWhB,YACXiB,EAAWzC,KAAKJ,MAAhB6C,QAEP,OACElC,EAAAC,EAAAC,cAAA,WACEF,EAAAC,EAAAC,cAAA,0BAEAF,EAAAC,EAAAC,cAAA,oDAC0CF,EAAAC,EAAAC,cAAA,KAAGiC,KAAK,oDAAR,OAD1C,gHAKAnC,EAAAC,EAAAC,cAAA,oBAEAF,EAAAC,EAAAC,cAACd,EAAD,CAAcW,SAAU,SAAAkB,GAAW,OAAIe,EAAKI,SAAS,CAACnB,mBACtDjB,EAAAC,EAAAC,cAACC,EAAA,EAAD,CAAWJ,SAAU,SAAAiB,GAAS,OAAIgB,EAAKI,SAAS,CAACpB,iBAEjDhB,EAAAC,EAAAC,cAAA,MAAImC,GAAG,aAAP,mBAEArC,EAAAC,EAAAC,cAACC,EAAA,EAAD,CACEmC,UAAU,YACVC,UAAWL,EACXlB,UAAWA,EACXwB,OAAQ,SAAAC,GAAC,OAAIA,EAAExB,cAAgBA,GAAewB,EAAEC,OAAS,KACzD1D,MAAM,gCACND,MAAOA,EACPI,MAAOA,EACPwD,QAASlD,KAAKyB,wBAGhBlB,EAAAC,EAAAC,cAAA,MAAImC,GAAG,eAAP,cAEArC,EAAAC,EAAAC,cAACC,EAAA,EAAD,CACEmC,UAAU,YACVC,UAAWL,EACXlB,UAAWA,EACXwB,OAAQ,SAAAC,GAAC,OAAIA,EAAExB,cAAgBA,GAAewB,EAAEC,OAAS,KACzD1D,MAAM,2BACND,MAAOA,EACPI,MAAOA,EACPwD,QAASlD,KAAKmC,4BAzESxB,IAAMC,WAyHvC,SAASuC,EAAQC,GACf,IAAMpC,EAAS,GAEf,OADAoC,EAAYC,QAAQ,SAAAC,GAAC,OAAIA,EAAED,QAAQ,SAAAE,GAAC,OAAIvC,EAAOE,KAAKqC,OAC7CvC,EAGT,IAAMwC,EAAiBC,YACrBtC,EACA,CACEuC,UAjCJ,WACE,OAAOC,QAAQC,IAAI,CACjBC,YAAS,uDACTA,YAAS,sDACTA,YAAS,sDACTA,YAAS,2DACRC,KAAK,SAAArE,GACN,SAASsE,EAAyBC,EAAOxC,GACvC,IAAMyC,EAAOd,EAAQ1D,EAAOuE,GAAOE,MAEnC,OADAD,EAAKZ,QAAQ,SAAAE,GAAC,OAAIA,EAAEY,OAAO3C,YAAcA,IAClCyC,EAGT,MAAO,CACLC,KAAMf,EAAQ,CACZY,EAAyB,EAAG,SAC5BA,EAAyB,EAAG,QAC5BA,EAAyB,EAAG,QAC5BA,EAAyB,EAAG,iBAgBhCK,qBAnDJ,SAA0BC,EAAWF,GAAQ,IAAAG,EAGJD,EAAUE,MAAM,cAAhDC,EAHoCF,EAAA,GAGxBG,EAHwBH,EAAA,GAGbI,EAHaJ,EAAAK,MAAA,GAI3C,IAAKH,IAAeC,GAAUC,EAAME,OAAS,EAC3C,MAAM,IAAIC,MAAM,oCAAsCR,GALb,IAQpCpB,EAAsBkB,EAAtBlB,MAAOzB,EAAe2C,EAAf3C,YAEd,MAAO,CACLiD,OAAQD,EAAWM,UAAUN,EAAWO,YAAY,KAAO,GAAK,IAAMN,EACtExB,MAAO+B,SAAS/B,EAAO,IACvBzB,gBAuCAyD,WAAY,qDAIDzB","file":"component---src-pages-charts-mysql-streaming-index-js-9348eada959b18a08a5e.js","sourcesContent":["import React from 'react';\nimport {ChartAndTable, Choose, JmhChartPage, TimeUnits} from '../../../components';\nimport {loadJson} from '../../../util';\n\nconst xDesc = {\n  title: 'Method',\n  prop: 'method',\n  values: [\n    'ConnectorJ.atOnce',\n    'ConnectorJ.stream',\n    'MariaDb.atOnce',\n    'MariaDb.stream',\n  ],\n};\n\nconst yDesc = {\n  title: 'limit',\n  prop: 'limit',\n  values: [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 20, 30, 40, 50, 60, 70, 80, 90, 100, 200, 300, 400, 500, 600, 700, 800, 900, 1000],\n};\n\nclass Environments extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.items = [\n      {\n        label: 'local',\n        value: 'local',\n      },\n      {\n        label: 'bad network (Wi-Fi)',\n        value: 'wifi',\n      },\n      {\n        label: 'good network (Wire)',\n        value: 'wire',\n        default: true,\n      },\n      {\n        label: 'strange',\n        value: 'strange',\n      },\n    ];\n  }\n\n  render() {\n    const {onChange} = this.props;\n    return (\n      <Choose label=\"Environment: \" onChange={onChange} items={this.items}/>\n    );\n  }\n}\n\nfunction getTicks(inc, max) {\n  const result = [];\n  for (let i = 0; i <= max; i += inc) {\n    result.push(i);\n  }\n  return result;\n}\n\nclass MysqlStreamingImpl extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      extractor: null,\n      environment: 'wire',\n    };\n\n    this.limitsBelow100Options = {\n      legend: {\n        // doesn't work with materialized UI\n        position: 'bottom',\n      },\n      // doesn't work with materialized UI\n      focusTarget: 'category',\n      hAxis: {\n        title: 'row count',\n        ticks: getTicks(10, 100),\n      },\n      vAxis: {\n        title: 'time, microseconds',\n        format: 'short',\n        viewWindow: {\n          min: 0,\n        },\n      },\n    };\n    this.limitsBelow1kOptions = JSON.parse(JSON.stringify(this.limitsBelow100Options));\n    this.limitsBelow1kOptions.hAxis.ticks = getTicks(100, 1000);\n  }\n\n  render() {\n    const {extractor, environment} = this.state;\n    const {jmhList} = this.props;\n\n    return (\n      <div>\n        <h3>Introduction</h3>\n\n        <p>\n          The performance tests are performed via <a href=\"http://openjdk.java.net/projects/code-tools/jmh/\">JMH</a>.\n          The configuration of a hardware is Intel® Core™ i7–5600U CPU @ 2.60GHz × 4 (2 core + 2 HT) with 16 GB RAM.\n        </p>\n\n        <h3>Charts</h3>\n\n        <Environments onChange={environment => this.setState({environment})}/>\n        <TimeUnits onChange={extractor => this.setState({extractor})}/>\n\n        <h3 id=\"below-100\">LIMIT below 100</h3>\n\n        <ChartAndTable\n          chartType=\"LineChart\"\n          dataTable={jmhList}\n          extractor={extractor}\n          filter={d => d.environment === environment && d.limit <= 100}\n          title=\"LIMIT below 100, microseconds\"\n          xDesc={xDesc}\n          yDesc={yDesc}\n          options={this.limitsBelow100Options}\n        />\n\n        <h3 id=\"all-drivers\">All LIMITs</h3>\n\n        <ChartAndTable\n          chartType=\"LineChart\"\n          dataTable={jmhList}\n          extractor={extractor}\n          filter={d => d.environment === environment && d.limit <= 1000}\n          title=\"All LIMITs, microseconds\"\n          xDesc={xDesc}\n          yDesc={yDesc}\n          options={this.limitsBelow1kOptions}\n        />\n      </div>\n    );\n  }\n}\n\nfunction exportDimensions(benchmark, params) {\n  //'com.komanov.mysql.streaming.jmh.ConnectorJBenchmark.atOnce'\n\n  const [driverPart, method, ...other] = benchmark.split('Benchmark.');\n  if (!driverPart || !method || other.length > 0) {\n    throw new Error('Expected 2 parts in a benchmark: ' + benchmark);\n  }\n\n  const {limit, environment} = params;\n\n  return {\n    method: driverPart.substring(driverPart.lastIndexOf('.') + 1) + '.' + method,\n    limit: parseInt(limit, 10),\n    environment,\n  };\n}\n\nfunction fetchAndCombineResults() {\n  return Promise.all([\n    loadJson('/data/charts/mysql-streaming/jmh-results-local.json'),\n    loadJson('/data/charts/mysql-streaming/jmh-results-wifi.json'),\n    loadJson('/data/charts/mysql-streaming/jmh-results-wire.json'),\n    loadJson('/data/charts/mysql-streaming/jmh-results-strange.json'),\n  ]).then(values => {\n    function flattenAndSetEnvironment(index, environment) {\n      const list = flatten(values[index].data);\n      list.forEach(v => v.params.environment = environment);\n      return list;\n    }\n\n    return {\n      data: flatten([\n        flattenAndSetEnvironment(0, 'local'),\n        flattenAndSetEnvironment(1, 'wifi'),\n        flattenAndSetEnvironment(2, 'wire'),\n        flattenAndSetEnvironment(3, 'strange'),\n      ]),\n    };\n  });\n}\n\nfunction flatten(listOfLists) {\n  const result = [];\n  listOfLists.forEach(l => l.forEach(v => result.push(v)));\n  return result;\n}\n\nconst MysqlStreaming = JmhChartPage(\n  MysqlStreamingImpl,\n  {\n    fetchFunc: fetchAndCombineResults,\n    exportDimensionsFunc: exportDimensions,\n    headerText: 'The Cost of a Streaming Data from MySQL (Charts)',\n  },\n);\n\nexport default MysqlStreaming;\n"],"sourceRoot":""}