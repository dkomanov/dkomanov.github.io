{"version":3,"file":"component---src-pages-charts-mysql-streaming-index-js-780495a06cbe1ac6221b.js","mappings":"kKAIMA,EAAQ,CACZC,MAAO,SACPC,KAAM,SACNC,OAAQ,CACN,oBACA,oBACA,iBACA,mBAIEC,EAAQ,CACZH,MAAO,QACPC,KAAM,QACNC,OAAQ,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,MAGjHE,EAAAA,SAAAA,GACJ,WAAYC,GAAQ,IAAD,SACjB,cAAMA,IAAN,MAEKC,MAAQ,CACX,CACEC,MAAO,QACPC,MAAO,SAET,CACED,MAAO,sBACPC,MAAO,QAET,CACED,MAAO,sBACPC,MAAO,OACPC,SAAS,GAEX,CACEF,MAAO,UACPC,MAAO,YAnBM,CAsBlB,CAOA,OA9BGJ,EAAAA,EAAAA,GAAAA,EAAAA,GAuBH,YAEDM,OAAA,WACE,IAAOC,EAAYC,KAAKP,MAAjBM,SACP,OACE,gBAAC,KAAD,CAAQJ,MAAM,gBAAgBI,SAAUA,EAAUL,MAAOM,KAAKN,OAEjE,IA9BGF,CAAqBS,EAAAA,WAiC3B,SAASC,EAASC,EAAKC,GAErB,IADA,IAAMC,EAAS,GACNC,EAAI,EAAGA,GAAKF,EAAKE,GAAKH,EAC7BE,EAAOE,KAAKD,GAEd,OAAOD,CACR,KAEKG,EAAAA,SAAAA,GACJ,WAAYf,GAAQ,IAAD,SACjB,cAAMA,IAAN,MAEKgB,MAAQ,CACXC,UAAW,KACXC,YAAa,QAGf,EAAKC,sBAAwB,CAC3BC,OAAQ,CAENC,SAAU,UAGZC,YAAa,WACbC,MAAO,CACL5B,MAAO,YACP6B,MAAOf,EAAS,GAAI,MAEtBgB,MAAO,CACL9B,MAAO,qBACP+B,OAAQ,QACRC,WAAY,CACVC,IAAK,KAIX,EAAKC,qBAAuBC,KAAKC,MAAMD,KAAKE,UAAU,EAAKb,wBAC3D,EAAKU,qBAAqBN,MAAMC,MAAQf,EAAS,IAAK,KA5BrC,CA6BlB,CA+CA,OA7EGM,EAAAA,EAAAA,GAAAA,EAAAA,GA8BH,YAEDV,OAAA,WAAU,IAAD,OACP,EAAiCE,KAAKS,MAA/BC,EAAP,EAAOA,UAAWC,EAAlB,EAAkBA,YACXe,EAAW1B,KAAKP,MAAhBiC,QAEP,OACE,uBAAKC,MAAM,YACT,0CAEA,oEAC0C,qBAAGC,KAAK,oDAAR,OAD1C,gHAKA,oCAEA,gBAACpC,EAAD,CAAcO,SAAU,SAAAY,GAAW,OAAI,EAAKkB,SAAS,CAAClB,YAAAA,GAAnB,IACnC,gBAAC,KAAD,CAAWZ,SAAU,SAAAW,GAAS,OAAI,EAAKmB,SAAS,CAACnB,UAAAA,GAAnB,IAE9B,sBAAIoB,GAAG,aAAP,mBAEA,gBAAC,KAAD,CACEC,UAAU,YACVC,UAAWN,EACXhB,UAAWA,EACXuB,OAAQ,SAAAC,GAAC,OAAIA,EAAEvB,cAAgBA,GAAeuB,EAAEC,OAAS,GAAhD,EACT/C,MAAM,gCACND,MAAOA,EACPI,MAAOA,EACP6C,QAASpC,KAAKY,wBAGhB,sBAAIkB,GAAG,eAAP,cAEA,gBAAC,KAAD,CACEC,UAAU,YACVC,UAAWN,EACXhB,UAAWA,EACXuB,OAAQ,SAAAC,GAAC,OAAIA,EAAEvB,cAAgBA,GAAeuB,EAAEC,OAAS,GAAhD,EACT/C,MAAM,2BACND,MAAOA,EACPI,MAAOA,EACP6C,QAASpC,KAAKsB,uBAIrB,IA7EGd,CAA2BP,EAAAA,WAyHjC,SAASoC,EAAQC,GACf,IAAMjC,EAAS,GAEf,OADAiC,EAAYC,SAAQ,SAAAC,GAAC,OAAIA,EAAED,SAAQ,SAAAE,GAAC,OAAIpC,EAAOE,KAAKkC,EAAhB,GAAf,IACdpC,CACR,CAED,IAAMqC,GAAiBC,EAAAA,EAAAA,IACrBnC,EACA,CACEoC,UAjCJ,WACE,OAAOC,QAAQC,IAAI,EACjBC,EAAAA,EAAAA,IAAS,wDACTA,EAAAA,EAAAA,IAAS,uDACTA,EAAAA,EAAAA,IAAS,uDACTA,EAAAA,EAAAA,IAAS,2DACRC,MAAK,SAAA1D,GACN,SAAS2D,EAAyBC,EAAOvC,GACvC,IAAMwC,EAAOd,EAAQ/C,EAAO4D,GAAOE,MAEnC,OADAD,EAAKZ,SAAQ,SAAAE,GAAC,OAAIA,EAAEY,OAAO1C,YAAcA,CAA3B,IACPwC,CACR,CAED,MAAO,CACLC,KAAMf,EAAQ,CACZY,EAAyB,EAAG,SAC5BA,EAAyB,EAAG,QAC5BA,EAAyB,EAAG,QAC5BA,EAAyB,EAAG,aAGjC,GACF,EAYGK,qBAnDJ,SAA0BC,EAAWF,GAGnC,MAAuCE,EAAUC,MAAM,cAAhDC,EAAP,KAAmBC,EAAnB,KAA8BC,EAA9B,WACA,IAAKF,IAAeC,GAAUC,EAAMC,OAAS,EAC3C,MAAM,IAAIC,MAAM,oCAAsCN,GAGxD,IAAOpB,EAAsBkB,EAAtBlB,MAAOxB,EAAe0C,EAAf1C,YAEd,MAAO,CACL+C,OAAQD,EAAWK,UAAUL,EAAWM,YAAY,KAAO,GAAK,IAAML,EACtEvB,MAAO6B,SAAS7B,EAAO,IACvBxB,YAAAA,EAEH,EAqCGsD,WAAY,qDAIhB,W","sources":["webpack://komanov.com/./src/pages/charts/mysql-streaming/index.js"],"sourcesContent":["import React from 'react';\nimport {ChartAndTable, Choose, JmhChartPage, TimeUnits} from '../../../components';\nimport {loadJson} from '../../../util';\n\nconst xDesc = {\n  title: 'Method',\n  prop: 'method',\n  values: [\n    'ConnectorJ.atOnce',\n    'ConnectorJ.stream',\n    'MariaDb.atOnce',\n    'MariaDb.stream',\n  ],\n};\n\nconst yDesc = {\n  title: 'limit',\n  prop: 'limit',\n  values: [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 20, 30, 40, 50, 60, 70, 80, 90, 100, 200, 300, 400, 500, 600, 700, 800, 900, 1000],\n};\n\nclass Environments extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.items = [\n      {\n        label: 'local',\n        value: 'local',\n      },\n      {\n        label: 'bad network (Wi-Fi)',\n        value: 'wifi',\n      },\n      {\n        label: 'good network (Wire)',\n        value: 'wire',\n        default: true,\n      },\n      {\n        label: 'strange',\n        value: 'strange',\n      },\n    ];\n  }\n\n  render() {\n    const {onChange} = this.props;\n    return (\n      <Choose label=\"Environment: \" onChange={onChange} items={this.items}/>\n    );\n  }\n}\n\nfunction getTicks(inc, max) {\n  const result = [];\n  for (let i = 0; i <= max; i += inc) {\n    result.push(i);\n  }\n  return result;\n}\n\nclass MysqlStreamingImpl extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      extractor: null,\n      environment: 'wire',\n    };\n\n    this.limitsBelow100Options = {\n      legend: {\n        // doesn't work with materialized UI\n        position: 'bottom',\n      },\n      // doesn't work with materialized UI\n      focusTarget: 'category',\n      hAxis: {\n        title: 'row count',\n        ticks: getTicks(10, 100),\n      },\n      vAxis: {\n        title: 'time, microseconds',\n        format: 'short',\n        viewWindow: {\n          min: 0,\n        },\n      },\n    };\n    this.limitsBelow1kOptions = JSON.parse(JSON.stringify(this.limitsBelow100Options));\n    this.limitsBelow1kOptions.hAxis.ticks = getTicks(100, 1000);\n  }\n\n  render() {\n    const {extractor, environment} = this.state;\n    const {jmhList} = this.props;\n\n    return (\n      <div class=\"markdown\">\n        <h3>Introduction</h3>\n\n        <p>\n          The performance tests are performed via <a href=\"http://openjdk.java.net/projects/code-tools/jmh/\">JMH</a>.\n          The configuration of a hardware is Intel® Core™ i7–5600U CPU @ 2.60GHz × 4 (2 core + 2 HT) with 16 GB RAM.\n        </p>\n\n        <h3>Charts</h3>\n\n        <Environments onChange={environment => this.setState({environment})}/>\n        <TimeUnits onChange={extractor => this.setState({extractor})}/>\n\n        <h3 id=\"below-100\">LIMIT below 100</h3>\n\n        <ChartAndTable\n          chartType=\"LineChart\"\n          dataTable={jmhList}\n          extractor={extractor}\n          filter={d => d.environment === environment && d.limit <= 100}\n          title=\"LIMIT below 100, microseconds\"\n          xDesc={xDesc}\n          yDesc={yDesc}\n          options={this.limitsBelow100Options}\n        />\n\n        <h3 id=\"all-drivers\">All LIMITs</h3>\n\n        <ChartAndTable\n          chartType=\"LineChart\"\n          dataTable={jmhList}\n          extractor={extractor}\n          filter={d => d.environment === environment && d.limit <= 1000}\n          title=\"All LIMITs, microseconds\"\n          xDesc={xDesc}\n          yDesc={yDesc}\n          options={this.limitsBelow1kOptions}\n        />\n      </div>\n    );\n  }\n}\n\nfunction exportDimensions(benchmark, params) {\n  //'com.komanov.mysql.streaming.jmh.ConnectorJBenchmark.atOnce'\n\n  const [driverPart, method, ...other] = benchmark.split('Benchmark.');\n  if (!driverPart || !method || other.length > 0) {\n    throw new Error('Expected 2 parts in a benchmark: ' + benchmark);\n  }\n\n  const {limit, environment} = params;\n\n  return {\n    method: driverPart.substring(driverPart.lastIndexOf('.') + 1) + '.' + method,\n    limit: parseInt(limit, 10),\n    environment,\n  };\n}\n\nfunction fetchAndCombineResults() {\n  return Promise.all([\n    loadJson('/data/charts/mysql-streaming/jmh-results-local.json'),\n    loadJson('/data/charts/mysql-streaming/jmh-results-wifi.json'),\n    loadJson('/data/charts/mysql-streaming/jmh-results-wire.json'),\n    loadJson('/data/charts/mysql-streaming/jmh-results-strange.json'),\n  ]).then(values => {\n    function flattenAndSetEnvironment(index, environment) {\n      const list = flatten(values[index].data);\n      list.forEach(v => v.params.environment = environment);\n      return list;\n    }\n\n    return {\n      data: flatten([\n        flattenAndSetEnvironment(0, 'local'),\n        flattenAndSetEnvironment(1, 'wifi'),\n        flattenAndSetEnvironment(2, 'wire'),\n        flattenAndSetEnvironment(3, 'strange'),\n      ]),\n    };\n  });\n}\n\nfunction flatten(listOfLists) {\n  const result = [];\n  listOfLists.forEach(l => l.forEach(v => result.push(v)));\n  return result;\n}\n\nconst MysqlStreaming = JmhChartPage(\n  MysqlStreamingImpl,\n  {\n    fetchFunc: fetchAndCombineResults,\n    exportDimensionsFunc: exportDimensions,\n    headerText: 'The Cost of a Streaming Data from MySQL (Charts)',\n  },\n);\n\nexport default MysqlStreaming;\n"],"names":["xDesc","title","prop","values","yDesc","Environments","props","items","label","value","default","render","onChange","this","React","getTicks","inc","max","result","i","push","MysqlStreamingImpl","state","extractor","environment","limitsBelow100Options","legend","position","focusTarget","hAxis","ticks","vAxis","format","viewWindow","min","limitsBelow1kOptions","JSON","parse","stringify","jmhList","class","href","setState","id","chartType","dataTable","filter","d","limit","options","flatten","listOfLists","forEach","l","v","MysqlStreaming","JmhChartPage","fetchFunc","Promise","all","loadJson","then","flattenAndSetEnvironment","index","list","data","params","exportDimensionsFunc","benchmark","split","driverPart","method","other","length","Error","substring","lastIndexOf","parseInt","headerText"],"sourceRoot":""}