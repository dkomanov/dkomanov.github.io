{"version":3,"file":"component---src-pages-charts-mysql-blob-fetch-index-tsx-479eabb8b57bfe4a76bf.js","mappings":"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","sources":["webpack://komanov.com/./src/pages/charts/java-compression/CompressionRatio.tsx","webpack://komanov.com/./src/pages/charts/java-compression/RealData.tsx","webpack://komanov.com/./src/pages/charts/mysql-blob-fetch/index.tsx"],"sourcesContent":["import React from 'react';\nimport { StatelessChoose } from '../../../components';\n\nexport const AllCompressionRatios = [\n  {\n    name: 'low',\n    value: 'LOW_COMPRESSION_1_3',\n  },\n  {\n    name: 'medium',\n    value: 'MEDIUM_COMPRESSION_2_1',\n  },\n  {\n    name: 'high',\n    value: 'HIGH_COMPRESSION_3_4',\n  },\n  {\n    name: 'extra',\n    value: 'EXTRA_HIGH_COMPRESSION_6_2',\n  },\n];\n\nexport const DefaultCompressionRatio = 'MEDIUM_COMPRESSION_2_1';\n\nexport const sideBySide = (lists: any[][]): any[] => {\n  if (lists.length <= 0) {\n    throw new Error('empty array');\n  }\n  if (lists.find((v) => v.length !== lists[0].length)) {\n    throw new Error('different lengths');\n  }\n\n  const r = [];\n  for (let i = 0; i < lists[0].length; ++i) {\n    for (let j = 0; j < lists.length; ++j) {\n      r.push(lists[j][i]);\n    }\n  }\n  return r;\n};\n\nexport const comparisonValues = (name: string, value: string) => {\n  return AllCompressionRatios.slice()\n    .reverse()\n    .map((r) => ({ name: `${name} [${r.name}]`, value: `${value}-${r.value}` }));\n};\n\nexport const CompressionRatioChooseComponent = ({ value, onChange }: { value: string; onChange: (value: string) => any }) => {\n  return (\n    <StatelessChoose\n      label=\"Compression Ratio:\"\n      value={value}\n      items={AllCompressionRatios.map((i) => ({\n        label: i.name,\n        value: i.value,\n      }))}\n      onChange={onChange}\n    />\n  );\n};\n\nexport default CompressionRatioChooseComponent;\n","import React from 'react';\nimport { StatelessChoose } from '../../../components';\nimport { JmhAxisDescriptor } from '../../../util/jmh';\n\nexport const RealLengthDesc: JmhAxisDescriptor = {\n  title: 'Real Input Size',\n  prop: 'length',\n  values: [\n    '298',\n    '420',\n    '531',\n    '538',\n    '686',\n    '34011',\n    '42223',\n    '51771',\n    '62830',\n    '81207',\n    '94417',\n    '607930',\n    '751048',\n    '781196',\n    '866049',\n    '904172',\n    '1075724',\n    '1293080',\n    '1448911',\n    '1599048',\n    '4072805',\n    '4287156',\n  ],\n};\n\nexport type RealDataset = 'all' | '34011-94417' | '607930-4287156';\nexport const DefaultRealDataset: RealDataset = '607930-4287156';\nconst AllRealDatasets: RealDataset[] = ['all', '34011-94417', '607930-4287156'];\n\nexport const filterByDataset = (dataset: RealDataset, p: any) =>\n  dataset === 'all' ||\n  (dataset === '34011-94417' ? inBetween(p.length, 34011, 94417) : inBetween(p.length, 607930, 4287156));\n\nfunction inBetween(v: any, from: number, to: number) {\n  const num = parseInt(v);\n  return from <= num && num <= to;\n}\n\nexport const DatasetChooseComponent = ({\n  dataset,\n  datasetSet,\n}: {\n  dataset: RealDataset;\n  datasetSet: (v: any) => any;\n}) => (\n  <StatelessChoose\n    label=\"Data set:\"\n    items={AllRealDatasets.map((v) => ({ label: v, value: v }))}\n    value={dataset}\n    onChange={datasetSet}\n  />\n);\n\nexport default DatasetChooseComponent;\n","import { Link } from 'gatsby';\nimport React, { useState } from 'react';\nimport {\n  ChartAndTable2,\n  ChooseSlider,\n  JmhChartComponentProps,\n  JmhChartPage,\n  StatelessChoose,\n  TimeUnits,\n} from '../../../components';\nimport { loadJson } from '../../../util';\nimport { EmptyJmhExtractorFuncHolder, JmhAxisDescriptor, JmhExtractorFunc } from '../../../util/jmh';\nimport {\n  AllCompressionRatios,\n  CompressionRatioChooseComponent,\n  comparisonValues,\n  DefaultCompressionRatio,\n  sideBySide,\n} from '../java-compression/CompressionRatio';\nimport {\n  DefaultRealDataset,\n  filterByDataset,\n  DatasetChooseComponent,\n  RealLengthDesc,\n} from '../java-compression/RealData';\n\ninterface NameValue {\n  name: string;\n  value: string;\n  default?: boolean;\n}\n\ntype StubDataset = 'all' | 'small' | 'big';\n\nfunction generateLengths() {\n  const list: NameValue[] = [];\n\n  function addKb(n: number) {\n    list.push({\n      name: `${n}KB`,\n      value: (n * 1024).toString(),\n    });\n  }\n  function addMb(mb: number, kb100: number) {\n    list.push({\n      name: `${mb}.${kb100}MB`,\n      value: (mb * 1024 * 1024 + kb100 * 100 * 1024).toString(),\n      default: mb === 5 && kb100 === 0,\n    });\n  }\n\n  addKb(1);\n  for (let kb = 5; kb < 100; kb += 5) {\n    addKb(kb);\n  }\n  for (let kb = 100; kb <= 900; kb += 100) {\n    addKb(kb);\n  }\n  for (let mb = 1; mb <= 4; ++mb) {\n    for (let kb = 0; kb <= 9; ++kb) {\n      addMb(mb, kb);\n    }\n  }\n  addMb(5, 0);\n  return list;\n}\n\nconst AllLengths = generateLengths();\n\nconst AlgorithmDesc: JmhAxisDescriptor = {\n  title: 'Compression Method',\n  prop: 'algorithm',\n  values: [\n    {\n      name: 'Uncompressed',\n      value: 'uncompressed',\n    },\n    {\n      name: 'Compressed table',\n      value: 'auto_mysql',\n    },\n    {\n      name: 'deflate',\n      value: 'deflate',\n    },\n    {\n      name: 'deflate+len MySQL',\n      value: 'explicit_mysql',\n    },\n    {\n      name: 'deflate+len Java',\n      value: 'deflateWithSize',\n    },\n    ...['gzip', 'snappy', 'zstd', 'brotli_0', 'brotli_6', 'brotli_11', 'lz4_fast', 'lz4_high9', 'lz4_high17'].map(\n      (v) => ({ name: v, value: v })\n    ),\n  ],\n};\n\nconst StubLengthDesc: JmhAxisDescriptor = {\n  title: 'Data length',\n  prop: 'length',\n  values: AllLengths,\n};\n\nconst hAxisDataLength = { title: 'Data length, bytes' };\nconst vAxisThroughput = { title: 'throughput, bytes per second' };\nconst vAxisTime = { title: 'time, microseconds' };\nconst legend = {\n  textStyle: {\n    fontSize: 14,\n  },\n};\n\nconst MysqlBlobFetchImpl = ({ jmhList }: JmhChartComponentProps) => {\n  const [length, lengthSet] = useState(AllLengths.find((v) => v.default)!.value);\n  const [compressionRatio, compressionRatioSet] = useState(DefaultCompressionRatio);\n  const [stubDataset, stubDatasetSet] = useState<StubDataset>('big');\n  const [realDataset, realDatasetSet] = useState(DefaultRealDataset);\n  const [network, networkSet] = useState('aws');\n  const [onlyThroughput, onlyThroughputSet] = useState(true);\n  const [extractor, extractorSet] = useState(EmptyJmhExtractorFuncHolder);\n\n  const filterByRatio = (p: any) => p.compressionRatio === compressionRatio;\n  const filterByStubDataset = (p: any) =>\n    stubDataset === 'all' || (stubDataset === 'small' ? parseInt(p.length) <= 102400 : parseInt(p.length) >= 102400);\n\n  const items = (list: string[]) => list.map((v) => ({ label: v, value: v }));\n  const StubDatasetChoose = (\n    <StatelessChoose\n      label=\"Data set:\"\n      items={items(['all', 'small', 'big'])}\n      value={stubDataset}\n      onChange={stubDatasetSet}\n    />\n  );\n  const RealDatasetChoose = <DatasetChooseComponent dataset={realDataset} datasetSet={realDatasetSet} />;\n  const CompressionRatioChoose = (\n    <CompressionRatioChooseComponent value={compressionRatio} onChange={compressionRatioSet} />\n  );\n  const NetworkChoose = (\n    <StatelessChoose\n      label=\"Network:\"\n      items={[\n        { label: 'localhost', value: 'localhost' },\n        { label: 'AWS', value: 'aws' },\n        { label: '1GBit Ethernet', value: 'ethernet' },\n        { label: '1GBit Wi-Fi', value: 'wifi' },\n      ]}\n      value={network}\n      onChange={networkSet}\n    />\n  );\n\n  const makeChooses = (realData: boolean) => {\n    return realData ? (\n      <div>\n        {NetworkChoose}\n        {RealDatasetChoose}\n      </div>\n    ) : (\n      <div>\n        {NetworkChoose}\n        {CompressionRatioChoose}\n        {StubDatasetChoose}\n      </div>\n    );\n  };\n  const makeFilter = (realData: boolean) =>\n    realData\n      ? (p: any) => p.network === network && p.realData === realData && filterByDataset(realDataset, p)\n      : (p: any) => p.network === network && p.realData === realData && filterByRatio(p) && filterByStubDataset(p);\n\n  const PerformanceChart = (realData: boolean) => {\n    if (onlyThroughput) {\n      return null;\n    }\n\n    return (\n      <div>\n        <h3>Fetch BLOBs of different lengths</h3>\n\n        {makeChooses(realData)}\n\n        <ChartAndTable2\n          chartType=\"Line\"\n          dataTable={jmhList}\n          extractor={extractor.func}\n          filter={makeFilter(realData)}\n          xDesc={realData ? RealLengthDesc : StubLengthDesc}\n          yDesc={AlgorithmDesc}\n          options={{\n            hAxis: hAxisDataLength,\n            vAxis: vAxisTime,\n            legend,\n          }}\n        />\n      </div>\n    );\n  };\n\n  const ThroughputChart = (realData: boolean) => {\n    const appThroughput = (\n      <div>\n        <h3>Effective throughput after decompression</h3>\n\n        {makeChooses(realData)}\n\n        <ChartAndTable2\n          chartType=\"Line\"\n          dataTable={jmhList}\n          extractor={(pm: any) => pm.totalBytesReturned}\n          filter={makeFilter(realData)}\n          xDesc={realData ? RealLengthDesc : StubLengthDesc}\n          yDesc={AlgorithmDesc}\n          options={{\n            hAxis: hAxisDataLength,\n            vAxis: vAxisThroughput,\n            legend,\n          }}\n        />\n      </div>\n    );\n\n    if (onlyThroughput) {\n      return appThroughput;\n    }\n\n    return (\n      <div>\n        {appThroughput}\n\n        <h3>MySQL data throughput over the wire</h3>\n\n        {makeChooses(realData)}\n\n        <ChartAndTable2\n          chartType=\"Line\"\n          dataTable={jmhList}\n          extractor={(pm: any) => pm.totalBytesFromMysql}\n          filter={makeFilter(realData)}\n          xDesc={realData ? RealLengthDesc : StubLengthDesc}\n          yDesc={AlgorithmDesc}\n          options={{\n            hAxis: hAxisDataLength,\n            vAxis: vAxisThroughput,\n            legend,\n          }}\n        />\n      </div>\n    );\n  };\n\n  const ComparisonCharts = (title: string, yDesc: JmhAxisDescriptor) => {\n    const thr = (\n      <div>\n        <h4>Throughput</h4>\n\n        {StubDatasetChoose}\n        {NetworkChoose}\n        <ChartAndTable2\n          chartType=\"Line\"\n          dataTable={jmhList}\n          extractor={(pm: any) => pm.totalBytesReturned}\n          filter={(p: any) => p.network === network && filterByStubDataset(p)}\n          xDesc={StubLengthDesc}\n          yDesc={yDesc}\n          alternateColors={yDesc.values.length % 4 === 0 ? 2 : 0}\n          options={{\n            hAxis: hAxisDataLength,\n            vAxis: vAxisThroughput,\n            legend,\n            focusTarget: 'category',\n          }}\n        />\n      </div>\n    );\n\n    if (onlyThroughput) {\n      return (\n        <div>\n          <h3>{title} with different compression ratios</h3>\n          {thr}\n        </div>\n      );\n    }\n\n    return (\n      <div>\n        <h3>{title} with different compression ratios</h3>\n\n        <h4>Performance</h4>\n\n        {StubDatasetChoose}\n        {NetworkChoose}\n        <ChartAndTable2\n          chartType=\"Line\"\n          dataTable={jmhList}\n          extractor={extractor.func}\n          filter={(p: any) => p.network === network && filterByStubDataset(p)}\n          xDesc={StubLengthDesc}\n          yDesc={yDesc}\n          alternateColors={yDesc.values.length % 4 === 0 ? 2 : 0}\n          options={{\n            hAxis: hAxisDataLength,\n            vAxis: vAxisTime,\n            legend,\n          }}\n        />\n        {thr}\n      </div>\n    );\n  };\n\n  return (\n    <div className=\"markdown\">\n      <h2>Introduction</h2>\n\n      <p>\n        Here are benchmarking results for{' '}\n        <Link to=\"/p/mysql-blob-fetch-performance-in-java\">&laquo;MySQL BLOB Fetch Performance In Java&raquo;</Link>{' '}\n        blog post.\n      </p>\n\n      <p>\n        The performance tests are performed via <a href=\"https://github.com/openjdk/jmh\">JMH</a>. The configuration of a\n        hardware is Intel® Core™ i7-1165G7 @ 2.80GHz × 8 (4 core + 4 HT) with 16 GB RAM. Scala version: 2.13.6.\n      </p>\n\n      <ul>\n        <li>\n          <a href=\"#real-data\">Charts for real data</a>\n        </li>\n        <li>\n          <a href=\"#stub-data\">Charts for stub (random) data</a>\n        </li>\n        <li>\n          <a href=\"#comparisons\">Comparisons for stub (random) data</a>\n        </li>\n      </ul>\n\n      <StatelessChoose\n        label=\"Hide irrelevant charts:\"\n        items={[\n          { label: 'Yes', value: true },\n          { label: 'Show Me Everything', value: false },\n        ]}\n        value={onlyThroughput}\n        onChange={onlyThroughputSet}\n      />\n      <TimeUnits onChange={(func: JmhExtractorFunc) => extractorSet({ func })} />\n\n      <h2>Charts for real data</h2>\n\n      {PerformanceChart(true)}\n      {ThroughputChart(true)}\n\n      <h2>Charts for stub (random) data</h2>\n\n      {PerformanceChart(false)}\n      {ThroughputChart(false)}\n\n      <h3>Fetch performance for different compression ratios</h3>\n\n      {NetworkChoose}\n      <ChooseSlider\n        label=\"Data length:\"\n        items={AllLengths.map((i) => {\n          return {\n            label: i.name,\n            value: i.value,\n            default: i.default === true,\n          };\n        })}\n        onChange={(value: string) => lengthSet(value)}\n      />\n\n      <ChartAndTable2\n        chartType=\"Bar\"\n        dataTable={jmhList}\n        extractor={(pm: any) => pm.totalBytesReturned}\n        filter={(p: any) => p.length === length && p.network === network}\n        xDesc={{\n          title: 'Compression Ratio',\n          prop: 'compressionRatio',\n          values: AllCompressionRatios,\n        }}\n        yDesc={AlgorithmDesc}\n        options={{\n          hAxis: { title: 'Compression Ratio' },\n          vAxis: vAxisThroughput,\n        }}\n      />\n\n      <h2 id=\"comparisons\">Comparisons</h2>\n\n      {ComparisonCharts('Uncompressed vs LZ4', {\n        title: 'Compression Method',\n        prop: 'comparison',\n        values: [\n          {\n            name: 'Uncompressed',\n            value: 'uncompressed-LOW_COMPRESSION_1_3',\n          },\n          ...comparisonValues('lz4_high9', 'lz4_high9'),\n        ],\n      })}\n      {ComparisonCharts('Compressed Table vs DECOMPRESS', {\n        title: 'Compression Method',\n        prop: 'comparison',\n        values: sideBySide([\n          comparisonValues('Compressed table', 'auto_mysql'),\n          comparisonValues('deflate+len MySQL', 'explicit_mysql'),\n        ]),\n      })}\n\n      {ComparisonCharts('Java vs MySQL', {\n        title: 'Compression Method',\n        prop: 'comparison',\n        values: sideBySide([comparisonValues('Java', 'deflateWithSize'), comparisonValues('MySQL', 'explicit_mysql')]),\n      })}\n\n      <p>\n        Full JMH logs: <a href={filePath('localhost.log.txt')}>localhost</a>&nbsp;(\n        <a href={filePath('localhost.json')}>json</a>), <a href={filePath('aws.log.txt')}>AWS</a>&nbsp;(\n        <a href={filePath('aws.json')}>json</a>), <a href={filePath('ethernet.log.txt')}>Ethernet</a>&nbsp;(\n        <a href={filePath('ethernet.json')}>json</a>), <a href={filePath('wifi.log.txt')}>Wi&#8209;Fi</a>&nbsp;(\n        <a href={filePath('wifi.json')}>json</a>).\n      </p>\n    </div>\n  );\n};\n\nconst filePath = (name: string) => `/data/charts/mysql-blob-fetch/${name}`;\n\nconst MysqlBlobFetch = JmhChartPage(MysqlBlobFetchImpl, {\n  fetchFunc: () => loadJson(filePath('jmh.min.json')),\n  exportDimensionsFunc: (_, params) => params,\n  headerText: 'MySQL BLOB Fetch Performance In Java (Charts)',\n});\n\nexport default MysqlBlobFetch;\n"],"names":["AllCompressionRatios","name","value","DefaultCompressionRatio","sideBySide","lists","length","Error","find","v","r","i","j","push","comparisonValues","slice","reverse","map","CompressionRatioChooseComponent","onChange","React","StatelessChoose","label","items","RealLengthDesc","title","prop","values","DefaultRealDataset","AllRealDatasets","filterByDataset","dataset","p","inBetween","from","to","num","parseInt","DatasetChooseComponent","datasetSet","AllLengths","list","addKb","n","toString","addMb","mb","kb100","default","kb","generateLengths","AlgorithmDesc","StubLengthDesc","hAxisDataLength","vAxisThroughput","vAxisTime","legend","textStyle","fontSize","filePath","MysqlBlobFetch","JmhChartPage","jmhList","useState","lengthSet","compressionRatio","compressionRatioSet","stubDataset","stubDatasetSet","realDataset","realDatasetSet","network","networkSet","onlyThroughput","onlyThroughputSet","EmptyJmhExtractorFuncHolder","extractor","extractorSet","filterByStubDataset","StubDatasetChoose","RealDatasetChoose","CompressionRatioChoose","NetworkChoose","makeChooses","realData","makeFilter","filterByRatio","PerformanceChart","ChartAndTable2","chartType","dataTable","func","filter","xDesc","yDesc","options","hAxis","vAxis","ThroughputChart","appThroughput","pm","totalBytesReturned","totalBytesFromMysql","ComparisonCharts","thr","alternateColors","focusTarget","className","Link","href","TimeUnits","ChooseSlider","id","fetchFunc","loadJson","exportDimensionsFunc","_","params","headerText"],"sourceRoot":""}