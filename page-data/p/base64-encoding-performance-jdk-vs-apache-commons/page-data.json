{"componentChunkName":"component---src-templates-blog-post-js","path":"/p/base64-encoding-performance-jdk-vs-apache-commons/","result":{"data":{"markdownRemark":{"id":"4d245a9f-a419-5c1d-b248-60c7aa546b4d","excerpt":"Recently I stumbled upon some old code that used Base64 from Apache Commons. So I decided to compare its performance to java.util.Base64. It’s not a new topic…","html":"<p>Recently I stumbled upon some old code that used <a href=\"https://commons.apache.org/proper/commons-codec/apidocs/org/apache/commons/codec/binary/Base64.html\">Base64</a> from <a href=\"https://commons.apache.org/proper/commons-codec/\">Apache Commons</a>. So I decided to compare its performance to <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/Base64.html\">java.util.Base64</a>.</p>\n<p>It’s not a new topic whatsoever (links at the end), so let’s just jump to benchmark results.</p>\n<h2 id=\"benchmarks\" style=\"position:relative;\"><a href=\"#benchmarks\" aria-label=\"benchmarks permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Benchmarks</h2>\n<p>Performance for encoding 10K characters for different JDKs. <code class=\"language-text\">java.util.Base64</code> is a clear winner performing almost 10x faster.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 740px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/981e9af33afb27d72db4d920ffc8f877/476e1/all-jdk-len10k.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 40%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAACXBIWXMAAAsTAAALEwEAmpwYAAAB2UlEQVQoz1WR204TYRSF+yw+gPe+gbfeeWmCPIAGr0wkRo1i4tmYKCi0kkYTLEYaU9tyEJS2YSiWltLBHgZ6wGrDzHSmtTOdmc90pgHcyf4v1p98e+29fJ2OjmECNthmD9sycRxwBs+w7L6B49iuZp/SB9Xvg2GYmKbXvoHYan5ltbmFseSnmJ4ZUizUnorc1fkTnqBZT3m6Y9FoS2iayu+kH007RG/rtNttt11gcXucF5lJ7Ng0+fUnx9MT6euExSjyh3EOStHhoA7v10bIVLaRJi/SVMvoWhdFUdx2gZWd+7zJz2LF/ewmn58AN66wIEZQPt6mJi3SB4QdleDyJbL7Oaqzo/xSqqiKjnx0hCzLQ2B+gqlcgH58ht3ksxOgMMZCIYI8f4u6FKfnQHRTJ7g6SlbKchC4TEspuSv/57Ccu4d/Lwgrb8mfcpgUxvhSjqF/ukOtEmeQXST0A3/wPIXmHtXACHK34V3C9kLzJdIW4RvneLD2CjH4GHH9kedupU7o7lmmUmHE6Ws0yhEMYO7hPK9vnuHqy88sP71A9++hl9UwfV+10Wc/FWJpU2BL2EBv5d2P4k+FUuIdMSGLmPlGT6u5N5R2q4jpOcLfC0i5RSyrewwcOPwHPOk5UHKax6MAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Encoding/Decoding, all JDKs\"\n        title=\"Encoding/Decoding, all JDKs\"\n        src=\"/static/981e9af33afb27d72db4d920ffc8f877/50383/all-jdk-len10k.png\"\n        srcset=\"/static/981e9af33afb27d72db4d920ffc8f877/1d79a/all-jdk-len10k.png 185w,\n/static/981e9af33afb27d72db4d920ffc8f877/1efb2/all-jdk-len10k.png 370w,\n/static/981e9af33afb27d72db4d920ffc8f877/50383/all-jdk-len10k.png 740w,\n/static/981e9af33afb27d72db4d920ffc8f877/73caa/all-jdk-len10k.png 1110w,\n/static/981e9af33afb27d72db4d920ffc8f877/536c7/all-jdk-len10k.png 1480w,\n/static/981e9af33afb27d72db4d920ffc8f877/476e1/all-jdk-len10k.png 1841w\"\n        sizes=\"(max-width: 740px) 100vw, 740px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>Performance for different data sizes (from 1 byte to 10K bytes) for openjdk-17. As you could see in the previous chart, openjdk-8 performs worse, but still <code class=\"language-text\">java.util.Base64</code> is clearly better in all cases.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 740px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/a76b48d402d09c39f4c4ad1c57dc2ea2/b2b2c/all-lengths-jdk17.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 33.513513513513516%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAYAAAAIy204AAAACXBIWXMAAAsTAAALEwEAmpwYAAAA5UlEQVQoz5WSC2vDMAyE8///4xgsybqGLrUSv1/fsNv1AYNtwsfJ+HSSwINzjlIKtdbOf0Wt4P1OSh5nPeM4sq4rQ4zxX0b35pmzeqPWgneaaRoREYac8030Oy6GLYz9xNq159Zq5nlGZGN46toKfsKDhnZKxZrlcu+GgWmaUErdV25CLu/P/J0DpSZyidigCF6RQ+qmztnrhNeVG4wzbHZDjHRWRjrORnHaTxzXmfePFw7HVw7LiChh2zUxJUJwLMuC1pqhD1IrqRmXTIjhxikntDXILsQUaD+iFvCuaUo3axs+xhenSCREGGt7mwAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Encoding/Decoding, all lengths, openjdk-17\"\n        title=\"Encoding/Decoding, all lengths, openjdk-17\"\n        src=\"/static/a76b48d402d09c39f4c4ad1c57dc2ea2/50383/all-lengths-jdk17.png\"\n        srcset=\"/static/a76b48d402d09c39f4c4ad1c57dc2ea2/1d79a/all-lengths-jdk17.png 185w,\n/static/a76b48d402d09c39f4c4ad1c57dc2ea2/1efb2/all-lengths-jdk17.png 370w,\n/static/a76b48d402d09c39f4c4ad1c57dc2ea2/50383/all-lengths-jdk17.png 740w,\n/static/a76b48d402d09c39f4c4ad1c57dc2ea2/73caa/all-lengths-jdk17.png 1110w,\n/static/a76b48d402d09c39f4c4ad1c57dc2ea2/536c7/all-lengths-jdk17.png 1480w,\n/static/a76b48d402d09c39f4c4ad1c57dc2ea2/b2b2c/all-lengths-jdk17.png 1708w\"\n        sizes=\"(max-width: 740px) 100vw, 740px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<h2 id=\"conclusion\" style=\"position:relative;\"><a href=\"#conclusion\" aria-label=\"conclusion permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Conclusion</h2>\n<p>It’s clearly a time to replace old usages of Apache Commons for base64 encoding. Unless you are on JDK7 or lower, then it’s time to upgrade this part first ;-) (as <code class=\"language-text\">java.util.Base64</code> was introduced in JDK8)</p>\n<h3 id=\"read-more\" style=\"position:relative;\"><a href=\"#read-more\" aria-label=\"read more permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Read More</h3>\n<ul>\n<li><a href=\"https://web.archive.org/web/20220514013436/http://java-performance.info/base64-encoding-and-decoding-performance/\">Base64 encoding and decoding performance</a>: a big good article from 2014 with multiple libraries comparison. Site doesn’t exist anymore, so link to <a href=\"https://web.archive.org/\">web archive</a>.</li>\n<li><a href=\"https://aws.amazon.com/blogs/developer/a-fast-and-correct-base-64-codec/\">A Fast and Correct Base 64 Codec</a>: AWS’s take on base64 (spoiler, their implementation is more “correct”).</li>\n<li><a href=\"https://aws.amazon.com/blogs/developer/follow-up-on-base64-codec-performance/\">Follow up on Base64 Codec Performance</a>: AWS’s performance benchmark.</li>\n<li><a href=\"https://www.baeldung.com/java-base64-encode-and-decode\">Java Base64 Encoding and Decoding</a>: basic tutorial.</li>\n</ul>\n<p>Play with charts <a href=\"/charts/base64-jdk-vs-apache-commons\">here</a>. Source code is on <a href=\"https://github.com/dkomanov/stuff/commit/fec95163cc428d486d7d61fb2b6c2d3126aca44f\">GitHub</a>. Originally posted on <a href=\"https://dkomanov.medium.com/base64-encoding-performance-jdk-vs-apache-commons-3fb83323414b\">Medium</a>. <a href=\"https://pixabay.com/illustrations/sport-athlete-track-runner-field-3677470/\">Cover image</a> by <a href=\"https://pixabay.com/users/mohamed_hassan-5229782/\">mohamed_hassan</a> from <a href=\"https://pixabay.com/\">Pixabay</a>.</p>","fields":{"slug":"/p/base64-encoding-performance-jdk-vs-apache-commons/"},"frontmatter":{"rawDate":"2022-09-25T00:00:00.000Z","date":"September 25, 2022","title":"Base64 Encoding Performance: JDK vs Apache Commons","description":"Performance comparison of base64 encoding/decoding between java.util.Base64 and Apache Commons implementation","tags":["java","base64","benchmark","performance"],"canonicalUrl":"https://dkomanov.medium.com/base64-encoding-performance-jdk-vs-apache-commons-3fb83323414b","cover":{"publicURL":"/static/ecc4fa550b069186efc0e43cb8026008/cover.jpg"}}}},"pageContext":{"slug":"/p/base64-encoding-performance-jdk-vs-apache-commons/","previous":{"fields":{"slug":"/p/replacing-hash-map-with-off-heap-hash-map-in-java/"}},"next":null}},"staticQueryHashes":["3675711862"]}